/*
 * This file was [INITIALLY!] generated by the Gradle 'init' task.
 */

//rootProject.name = "Genesis-Plugins"
//include("src")
//include("libs")

plugins {
    `java-library`
    java
    `maven-publish`
    idea
}

repositories {

    mavenCentral()

    flatDir {
        dirs("../LightSide/")
    }

    flatDir {
        dirs("libs")
    }

    maven {
        url = uri("https://raw.github.com/Deses/RiverLayout/mvn-repo/")
    }
}

dependencies {
    api("edu.stanford.nlp:stanford-parser:3.9.2")
    api("edu.stanford.nlp:stanford-corenlp:4.4.0")
    api("se.datadosen.riverlayout:riverlayout:1.1")
    api("com.oracle.database.xml:xmlparserv2:21.5.0.0")
    api("org.apache.commons:commons-math3:3.6.1")
    api("org.simpleframework:simple-http:6.0.1")
    api("org.simpleframework:simple:5.1.6")
    api("org.simpleframework:simple-transport:6.0.1")
    api(":LightSide")
    api("nz.ac.waikato.cms.weka:weka-dev:3.9.6")
    api("nz.ac.waikato.cms.weka:LibLINEAR:1.9.7")
    api("nz.ac.waikato.cms.weka:chiSquaredAttributeEval:1.0.4")
    api(":yeritools-min-1.0")
    api("org.hamcrest:hamcrest-core:2.2")
    api("junit:junit:4.13.2")
    api("de.bwaldvogel:liblinear:2.21")
}

group = "edu.cmu.side"
version = "1.0-SNAPSHOT"
description = "Genesis-Plugins"
java.sourceCompatibility = JavaVersion.VERSION_17

val testsJar by tasks.registering(Jar::class) {
    archiveClassifier.set("tests")
    from(sourceSets["test"].output)
}

tasks.test {
    useJUnitPlatform()
    testLogging {
        events("passed", "skipped", "failed")
    }
}

tasks.withType<JavaCompile> {
    options.encoding = "UTF-8"
    options.compilerArgs.addAll(arrayOf(
        "--add-exports", "java.base/java.util=ALL-UNNAMED"
    ))
}

publishing {
    publications.create<MavenPublication>("maven") {
        from(components["java"])
        artifact(testsJar)
    }
}

//tasks.withType<JavaCompile> {
//    options.encoding = "UTF-8"
//}
